if("undefined"!=typeof module){var nerdamer=require("./nerdamer.core.js");require("./Calculus"),require("./Algebra")}!function(){"use strict";var t=nerdamer.getCore(),e=t.PARSER,i=t.Symbol,n=t.Utils.format,s=t.Utils.isVector,r=t.Utils.isArray,a=(t.Vector,t.groups.S),o=(t.groups.EX,t.groups.CP),l=t.groups.CB,u=t.groups.FN;t.Settings.Laplace_integration_depth=40,i.prototype.findFunction=function(t){if(this.group===u&&this.fname===t)return this.clone();var e;if(this.symbols)for(var i in this.symbols)if(e=this.symbols[i].findFunction(t))break;return e};var c=t.Extra={version:"1.4.1",LaPlace:{transform:function(s,r,o){r=r.toString();var p,m=(s=i.unwrapSQRT(s,!0)).stripVar(r),f=s.group;if((s=e.divide(s,m.clone())).isConstant()||!s.contains(r,!0))p=e.parse(n("({0})/({1})",s,o));else if(f===a&&t.Utils.isInt(s.power)){var d=String(s.power);p=e.parse(n("factorial({0})/({1})^({0}+1)",d,o))}else if(s.group===a&&s.power.equals(.5))p=e.parse(n("sqrt(pi)/(2*({0})^(3/2))",o));else if(s.isComposite())p=new i(0),s.each(function(t){p=e.add(p,c.LaPlace.transform(t,r,o))},!0);else if(!s.isE()||s.power.group!==a&&s.power.group!==l){if(s.group!==u||-1===["sin","cos","sinh","cosh"].indexOf(s.fname)||s.args[0].group!==a&&s.args[0].group!==l){var v=t.Settings.integration_depth<t.Settings.Laplace_integration_depth;if(v){var g=t.Settings.integration_depth;t.Settings.integration_depth=t.Settings.Laplace_integration_depth}t.Utils.block("PARSE2NUMBER",function(){var n=r,a=s.sub(r,n),l=e.parse("e^(-"+o+"*"+n+")*"+a);(p=t.Calculus.integrate(l,n)).hasIntegral()&&e.error("Unable to compute transform"),p=p.sub(r,0),p=(p=e.expand(e.multiply(p,new i(-1)))).sub(n,r)},!1),p=t.Utils.block("PARSE2NUMBER",function(){return e.parse(p)},!0),v&&(t.Settings.integration_depth=g)}else{b=s.args[0].stripVar(r);switch(s.fname){case"sin":p=e.parse(n("({0})/(({1})^2+({0})^2)",b,o));break;case"cos":p=e.parse(n("({1})/(({1})^2+({0})^2)",b,o));break;case"sinh":p=e.parse(n("({0})/(({1})^2-({0})^2)",b,o));break;case"cosh":p=e.parse(n("({1})/(({1})^2-({0})^2)",b,o))}}}else{var b=s.power.stripVar(r);p=e.parse(n("1/(({1})-({0}))",b,o))}return e.multiply(p,m)},inverse:function(s,r,u){return t.Utils.block("POSITIVE_MULTIPLIERS",function(){if(s.group===a||s.group===l||s.group===o){var c,p,m,f,d,v,g,b,S,w=function(){(f=e.multiply(f,c)).multiplier=f.multiplier.multiply(s.multiplier),f=e.divide(f,d.a)};if(v=s.multiplier.clone(),s.toUnitMultiplier(),c=s.getNum(),(p=s.getDenom().toUnitMultiplier()).group===o?(g=p.power.clone(),p.toLinear()):g=new t.Frac(1),m=r.toString(),d=t.Utils.decompose_fn(p,m,!0),t.Utils.decompose_fn(e.expand(c.clone()),m,!0),c.multiplier=c.multiplier.multiply(v),(p.group===a||p.group===l)&&d.x.value===m&&d.b.equals(0)&&t.Utils.isInt(d.x.power))S=d.x.power-1,b=t.Math2.factorial(S),f=e.divide(e.pow(u,new i(S)),new i(b)),w();else if(p.group===o&&g.equals(1)){if(d.x.isLinear()&&!c.contains(m))u=e.divide(u,d.a.clone()),f=e.pow(new i("e"),e.multiply(u,d.b.negate())),w();else if(d.x.group===a&&d.x.power.equals(2))if(c.contains(m)){var q=new i(1);if(c.group===l){var h=new i(1);c.each(function(t){t.contains(m)?h=e.multiply(h,t):q=e.multiply(q,t)}),c=h}var y,x,U,_,L,V,M,E,P,C,F=t.Utils.decompose_fn(c,m,!0);if(y=F.a,x=F.b,U=y.containsFunction("sin"),L=y.containsFunction("cos"),_=x.containsFunction("cos"),V=x.containsFunction("sin"),F.x.value===m&&F.x.isLinear()&&!(U&&_||L||V))f=e.parse(n("(({1})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})",u,F.a,d.a,d.b));else if(U&&_)if(M=y.findFunction("sin"),E=x.findFunction("cos"),M.args[0].equals(E.args[0])&&!M.args[0].contains(m))k=e.divide(x,E.toUnitMultiplier()).toString(),P=M.args[0].toString(),R=d.b,C=e.divide(y,M.toUnitMultiplier()),A="(({1})*({2})*cos({3})*sin(sqrt({4})*({0})))/sqrt({4})+({1})*sin({3})*({5})*cos(sqrt({4})*({0}))",f=e.parse(n(A,u,q,k,P,R,C))}else f=e.parse(n("(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/sqrt(({2})*({3}))",u,c,d.a,d.b))}else if(d.x.power.num&&d.x.power.num.equals(3)&&d.x.power.den.equals(2)&&c.contains("sqrt(pi)")&&!c.contains(m)&&c.isLinear()){var k=e.divide(c.clone(),e.parse("sqrt(pi)"));f=e.parse(n("(2*({2})*sqrt({0}))/({1})",u,d.a,k,c))}else if(g.equals(2)&&d.x.power.equals(2)){var R,A;if(c.contains(m))if((F=t.Utils.decompose_fn(e.expand(c.clone()),m,!0)).x.isComposite()){var D=[],I=c.collectSymbols(function(e){e=i.unwrapPARENS(e);var n=t.Utils.decompose_fn(e,m,!0);return n.symbol=e,n}).sort(function(t,e){var i;return i=t.x.value!==m?0:t.x.power,(e.x.value!==m?0:e.x.power)-i});q=new i(-1);for(var N=0;N<I.length;N++){var z=I[N];z.x.value===m?D.push(z):q=e.multiply(q,z.symbol)}D[0].x.power.equals(2)&&D[1].x.power.equals(1)&&D[1].b.equals(0)&&!D[0].b.equals(0)&&(k=D[0].a.negate(),A="-(({1})*({2})*({5})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})^2*sqrt(({4})*({5})))-(({1})*({3})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})*sqrt(({4})*({5})))+(({1})*({2})*cos((sqrt(({4})*({5}))*({0}))/({4})))/({4})^2",f=e.parse(n(A,u,q,k,D[0].b,d.a,d.b)))}else F.x.isLinear()?(q=e.divide(F.a,new i(2)),A="(({1})*({0})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))",f=e.parse(n(A,u,q,d.a,d.b))):F.x.power.equals(2)&&(F.b.equals(0)?(q=e.divide(F.a,new i(2)),A="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",f=e.parse(n(A,u,q,d.a,d.b))):(q=e.divide(F.a,new i(2)),R=F.b.negate(),A="-((({2})*({4})-2*({1})*({3}))*sin((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3})*sqrt(({2})*({3})))+(({4})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3}))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",f=e.parse(n(A,u,q,d.a,d.b,R))));else q=e.divide(c,new i(2)),A="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({3})*sqrt(({2})*({3})))-(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*({3}))",f=e.parse(n(A,u,q,d.a,d.b))}}return f||(f=e.symfunction("ilt",arguments)),f},!0)}},Statistics:{frequencyMap:function(t){for(var e={},i=0,n=t.length;i<n;i++){var s=t[i].toString();e[s]||(e[s]=0),e[s]++}return e},sort:function(t){return t.sort(function(t,i){return t.isConstant()&&i.isConstant()||e.error("Unable to sort! All values must be numeric"),t.multiplier.subtract(i.multiplier)})},count:function(t){return new i(t.length)},sum:function(t,n){for(var s=new i(0),r=0,a=t.length;r<a;r++){var o=t[r].clone();s=n?e.add(e.pow(e.subtract(o,n.clone()),new i(2)),s):e.add(o,s)}return s},mean:function(){var t=[].slice.call(arguments);return s(t[0])?c.Statistics.mean.apply(this,t[0].elements):e.divide(c.Statistics.sum(t),c.Statistics.count(t))},median:function(){var i,n=[].slice.call(arguments);if(s(n[0]))return c.Statistics.median.apply(this,n[0].elements);try{var r=c.Statistics.sort(n),a=n.length;if(t.Utils.even(a)){var o=a/2;i=c.Statistics.mean(r[o-1],r[o])}else i=r[Math.floor(a/2)]}catch(t){i=e.symfunction("median",n)}return i},mode:function(){var i,n=[].slice.call(arguments);if(s(n[0]))return c.Statistics.mode.apply(this,n[0].elements);var a=c.Statistics.frequencyMap(n);if(1===t.Utils.keys(a).length)i=n[0];else{var o={};for(var l in a){var u=a[l];if(u in o){var p=o[u];r(p)?p.push(l):o[u]=[l,o[u]]}else o[u]=l}var m=o[Math.max.apply(null,t.Utils.keys(o))];i=r(m)?e.symfunction("mode",m.sort()):e.parse(m)}return i},gVariance:function(t,i){var n=c.Statistics.mean.apply(c.Statistics,i),s=c.Statistics.sum(i,n);return e.multiply(t,s)},variance:function(){var t=[].slice.call(arguments);if(s(t[0]))return c.Statistics.variance.apply(this,t[0].elements);var n=e.divide(new i(1),c.Statistics.count(t));return c.Statistics.gVariance(n,t)},sampleVariance:function(){var t=[].slice.call(arguments);if(s(t[0]))return c.Statistics.sampleVariance.apply(this,t[0].elements);var n=e.divide(new i(1),e.subtract(c.Statistics.count(t),new i(1)));return c.Statistics.gVariance(n,t)},standardDeviation:function(){var t=[].slice.call(arguments);return s(t[0])?c.Statistics.standardDeviation.apply(this,t[0].elements):e.pow(c.Statistics.variance.apply(c.Statistics,t),new i(.5))},sampleStandardDeviation:function(){var t=[].slice.call(arguments);return s(t[0])?c.Statistics.sampleStandardDeviation.apply(this,t[0].elements):e.pow(c.Statistics.sampleVariance.apply(c.Statistics,t),new i(.5))},zScore:function(t,i,n){return e.divide(e.subtract(t,i),n)}},Units:{table:{foot:"12 inch",meter:"100 cm",decimeter:"10 cm"}}};nerdamer.register([{name:"laplace",visible:!0,numargs:3,build:function(){return c.LaPlace.transform}},{name:"ilt",visible:!0,numargs:3,build:function(){return c.LaPlace.inverse}},{name:"mean",visible:!0,numargs:-1,build:function(){return c.Statistics.mean}},{name:"median",visible:!0,numargs:-1,build:function(){return c.Statistics.median}},{name:"mode",visible:!0,numargs:-1,build:function(){return c.Statistics.mode}},{name:"smpvar",visible:!0,numargs:-1,build:function(){return c.Statistics.sampleVariance}},{name:"variance",visible:!0,numargs:-1,build:function(){return c.Statistics.variance}},{name:"smpstdev",visible:!0,numargs:-1,build:function(){return c.Statistics.sampleStandardDeviation}},{name:"stdev",visible:!0,numargs:-1,build:function(){return c.Statistics.standardDeviation}},{name:"zscore",visible:!0,numargs:3,build:function(){return c.Statistics.zScore}}]),nerdamer.api()}();