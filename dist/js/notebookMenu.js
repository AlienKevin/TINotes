const toggleBtn=document.querySelector("#hamburger-icon.toggle-btn"),sidebar=document.getElementById("sidebar"),notebookMenu=sidebar.querySelector("ul"),addNotebookBtn=document.getElementById("addNotebookBtn");toggleBtn.addEventListener("click",o=>{o.preventDefault(),sidebar.classList.toggle("active"),toggleBtn.classList.toggle("active")});const defaultNotebookName="notebook1",notebookNameList=[];function addDefaultNotebook(){setNotebookInStorage(defaultNotebookName,getCurrentNotebook()),displayNotebookLabel(defaultNotebookName),notebookNameList.push(defaultNotebookName)}function loadNotebooks(){localforage.iterate(function(o,e){notebookNameList.push(e),displayNotebookLabel(e)}).catch(function(o){console.log(o)})}function getCurrentNotebook(){const o={};return Object.keys(localStorage).forEach(e=>{console.log("TCL: key",e),o[e]=getItemFromStorage(e)}),o}function renameNotebook(o){const e=o.innerHTML,t=createItemNameInput("notebook");insertAfter(o,t),t.focus(),o.remove(),t.addEventListener("keypress",o=>{if(13==o.keyCode){const o=t.value;notebookNameList.indexOf(o)>=0&&o!==e?createErrorMessage(t,"Duplicated notebook name"):(replaceElementInArray(notebookNameList,e,o),renameNotebookInStorage(e,o),displayNotebookLabel(o,t),t.remove())}})}function displayNotebookLabel(o,e){const t=document.createElement("li");t.classList.add("item"),t.classList.add("notebook"),t.textContent=o,e?insertAfter(e,t):notebookMenu.appendChild(t)}function renameNotebookInStorage(o,e){getNotebookFromStorage(o).then(o=>setNotebookInStorage(e,o)),removeNotebookFromStorage(o)}function removeNotebookFromStorage(o){localforage.removeItem(o).catch(function(o){console.log(o)})}function getNotebookFromStorage(o){return localforage.getItem(o)}function setNotebookInStorage(o,e){localforage.setItem(o,e).catch(o=>{console.log(o)})}function countNotebooks(){return localforage.length()}countNotebooks().then(o=>{console.log("TCL: notebookSize",o),o>0?loadNotebooks():addDefaultNotebook()});
//# sourceMappingURL=../../maps/js/notebookMenu.js.map
